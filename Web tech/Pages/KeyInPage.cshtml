@page
@model Web_tech.Pages.KeyInPageModel
@{
    <html lang="en">

    <head>
        <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">

        <!-- Load Quill JavaScript -->
        <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    </head>
    <style>
        form {
            position: relative;
            padding: 20px;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        label {
            display: block;
            width: 150px;
            margin: 10px 0;
        }

        input[type="text"],
        input[type="number"],
        select {
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 100%;
            box-sizing: border-box;
        }

        input[type="submit"] {
        }

            input[type="submit"]:hover {
                background-color: #45a049;
            }

        #subject-editor {
            height: 200px;
            width: 100%;
            background-color: white;
        }

        #answer-editor {
            height: 200px;
            width: 100%;
            background-color: white;
        }

        .form-wrapper {
            border: 1px solid #ccc;
            border-radius: 10px;
            padding: 20px;
            width: 80%;
            margin: auto;
            margin-top: 50px;
            position: relative;
            background: rgba(255, 255, 255, 0.72);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(7.8px);
            -webkit-backdrop-filter: blur(7.8px);
        }

            .form-wrapper input[type="submit"] {
                background-color: #007bff;
                color: white;
                padding: 12px 20px;
                border: none;
                position: absolute;
                border-radius: 15px;
                cursor: pointer;
                bottom: 15px;
                right: 15px;
                font-weight: bold;
                transition: all 0.3s ease-in-out;
            }

                .form-wrapper input[type="submit"]:hover {
                    background-color: #ffffff;
                    color: #007bff;
                    border-color: #007bff;
                    cursor: pointer;
                }



        .Container {
            margin-top: calc(10vh + 2vw);
            margin-bottom: calc(10vh + 2vw);
        }

        .submitbut:hover {
            background-color: #ffffff;
            color: #007bff;
            border-color: #007bff;
            cursor: pointer;
        }
    </style>

    <body>
        <div class="Container">
            <div class="form-wrapper">
                <form>
                    <label for="difficulty">Difficulty level:</label>
                    <select id="difficulty" name="difficulty">
                    </select>

                    <label for="subject">Subject:</label>
                    <select id="subject">
                    </select>

                    <label for="question">Question:</label>
                    <div id="subject-editor"></div>

                    <label for="answer">Answer:</label>
                    <div id="answer-editor"></div>


                    <label for="marks">Marks:</label>
                    <input type="number" id="marks" name="marks" min="0">

                    <label for="question-image">Upload image:</label>
                    <input type="file" id="question-image" name="question-image" onchange="previewquestionImage(event)">
                    <img id="question-preview" src="#" alt="Preview Image" style="display: none; max-width: 300px; max-height: 300px;">

                    <label for="answer-image">Upload image:</label>
                    <input type="file" id="answer-image" name="answer-image" onchange="previewanswerImage(event)">
                    <img id="answer-preview" src="#" alt="Preview Image" style="display: none; max-width: 300px; max-height: 300px;">

                    <input type="submit" value="Submit">
                </form>
            </div>
        </div>
    </body>
    <script src="~/js/UpdateOptions.js">

    </script>
    <script>
        let subjects = [
            {
                Text: "All",
                Value: "*"
            },
            {
                Text: "Math",
                Value: "math"
            },
            {
                Text: "English",
                Value: "english"
            },
            {
                Text: "History",
                Value: "history"
            },
            {
                Text: "Science",
                Value: "science"
            }
        ];

        let difficulty = [
            {
                Text: "Easy",
                Value: 1
            },
            {
                Text: "Medium",
                Value: 2
            },
            {
                Text: "Hard",
                Value: 3
            }
        ];

        UpdateOptions(subjects, "subject");
        UpdateOptions(difficulty, "difficulty");
    </script>
    <script>
        const subjectSelect = document.getElementById('subject');
        const otherSubjectInput = document.getElementById('other-subject');

        subjectSelect.addEventListener('change', () => {
            if (subjectSelect.value === 'other') {
                otherSubjectInput.style.display = 'inline';
            } else {
                otherSubjectInput.style.display = 'none';
            }
        });
    </script>
    <script>
        var subjectEditor = new Quill('#subject-editor', {
            modules: {
                toolbar: [
                    [{ 'header': [1, 2, 3, false] }],
                    ['bold', 'italic', 'underline'],
                    ['code', 'strike'],
                    ['image', 'link'],
                    [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                    ['clean']
                ]
            },

            placeholder: 'Enter your question here',
            theme: 'snow',
            contentStyle: {
                fontSize: '72px'
            }
        });

        subjectEditor.on('text-change', function() {
            document.getElementById('subject').value = subjectEditor.root.innerHTML;
        });
        var editorElement = document.querySelector('#editor');
    </script>
    <script>
        var answerEditor = new Quill('#answer-editor', {
            modules: {
                toolbar: [
                    [{ 'header': [1, 2, 3, false] }],
                    ['bold', 'italic', 'underline'],
                    ['code', 'strike'],
                    [{ 'indent': '-1' }, { 'indent': '+1' }],
                    [{ 'align': [] }],
                    [{ 'direction': 'rtl' }],
                    [{ 'code-block': 'language' }],
                    ['image', 'link'],
                    [{ 'list': 'ordered' }, { 'list': 'bullet' }],
                    ['clean']
                ]
            },
            placeholder: 'Enter your answer here',
            theme: 'snow'
        });

        answerEditor.on('text-change', function() {
            document.getElementById('answer').value = answerEditor.root.innerHTML;
        });
    </script>
    <script>
        function previewquestionImage(event) {
            var input = event.target;
            var preview = document.getElementById("question-preview");

            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = "block";
                };

                reader.readAsDataURL(input.files[0]);
            } else {
                preview.src = "#";
                preview.style.display = "none";
            }
        }
    </script>
    <script>
        function previewanswerImage(event) {
            var input = event.target;
            var preview = document.getElementById("answer-preview");

            if (input.files && input.files[0]) {
                var reader = new FileReader();

                reader.onload = function(e) {
                    preview.src = e.target.result;
                    preview.style.display = "block";
                };

                reader.readAsDataURL(input.files[0]);
            } else {
                preview.src = "#";
                preview.style.display = "none";
            }
        }
    </script>
    </html>

}